name: "SexMex"

sceneByURL: &byUrl
  - action: scrapeXPath
    url:
      - sexmex.xxx
    scraper: sceneScraper
galleryByURL: *byUrl

xPathScrapers:
  sceneScraper:
    scene:
      Title: &title //div[@class="panel-body"]/h4//text()
      Details: &details //meta[@name="description"]/@content
      Tags: &tags
        Name: 
          selector: //meta[@name="keywords"]/@content
          split: ","
      Performers: &performers
        Name: //div[@class="panel-body"]/p[@class="cptn-model"]/a//text()
      Studio: &studio
        Name:
          fixed: Sex Mex
      Image: 
        selector: //video/@poster
        postProcess:
          - replace:
              - regex: cover.jpg$
                with: 1.jpg
      Date: &date
        selector: *title
        postProcess:
          - replace:
              - regex: "[^a-zA-Z\\d\\-._~]" # clean title so that it can construct a valid url
                with: "+" # "%20"
              - regex: \.+
                with: "+"
              - regex: (.*)
                with: https://sexmex.xxx/tour/search.php?query=$1
          - subScraper:
              selector: //p[@class="scene-date"][1]/text()
          - parseDate: Jan 2 2006
    gallery:
      Title: *title
      Details: *details
      Tags: *tags
      Performers: *performers
      Studio: *studio
      Date: *date

# Last Updated February 14, 2022
