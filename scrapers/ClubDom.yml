name: ClubDom.yml
sceneByURL:
  - action: scrapeXPath
    url:
      - clubdom.com/tour
    scraper: sceneScraper
  - action: scrapeXPath
    url:
      - clubdom.com/vod
    scraper: vodScraper
sceneByName:
  action: scrapeXPath
  queryURL: https://www.clubdom.com/vod/search.php?st=advanced&page=1&qany=&qex=&none=&tadded=0&cat%5B%5D=5&qall={}
  scraper: sceneSearch
sceneByFragment:
  action: scrapeXPath
  scraper: sceneSearch
  queryURL: https://www.clubdom.com/vod/search.php?st=advanced&page=1&qany=&none=&tadded=0&cat%5B%5D=5&qex={title}
  queryURLReplace:
     title:
       - regex: " "
         with: "+"
sceneByQueryFragment:
  action: scrapeXPath
  queryURL: "{url}"
  scraper: vodScraper
xPathScrapers:
  sceneScraper:
    scene:
      Title:
        selector: //span[@class="left"]/h1
      Date:
        selector: //strong[contains(.,"Release date:")]/following-sibling::text()
        postProcess:
          - parseDate: 01/02/2006
      Performers:
        Name: //span[@class="models_list"]//a
      Tags:
        Name: //span[@class="categories"]//a
      Details:
        selector: //strong[contains(.,"Description:")]/following-sibling::text()
      Image:
        selector: //div[@class="videoplayer"]/img//@src0_1x
        postProcess:
          - replace:
              - regex: ^
                with: "https:"
      Studio:
        Name:
          selector: //base/@href
          postProcess:
            - map:
                //www.clubdom.com/tour/: Club Dom
  vodScraper:
    scene:
      URL: //div[@class='cell content_tab_current']/a/@href
      Title:
        selector: //span[@class="title_bar_hilite"]
      Date:
        selector: //div[@class="gallery_info"]/div[1]//div[@class="cell update_date"]
        postProcess:
          - parseDate: 01/02/2006
      Performers:
        Name: //div[@class="gallery_info"]/span[@class="update_models"]/a
      Tags:
        Name: //span[@class="update_tags"]/a
      Details:
        selector: //span[@class="update_description"]
      Image:
        selector: //base/@href|//div[@id="download_form"]/following-sibling::script
        concat: "|"
        postProcess:
          - replace:
              - regex: '(.*)/vod/\|.*thumbnail:"(.*)",vtt_file:.*'
                with: $1$2
      Studio:
        Name:
          selector: //base/@href
          postProcess:
            - replace:
                - regex: https://(www.)?([^.]+)\..*
                  with: $2
            - map:
                clubdom: Club Dom
  sceneSearch:
    scene:
      Title:
        selector: //div[@class='update_details']/a[2]/text()
      URL: //div[@class='update_details']/a[2]/@href
      Image: 
        selector: //div[@class='update_details']/a[2]/@href
        # the main scene image isn't the same as //div[@class='category_listing_wrapper_updates']/div/a/img/@src
        subScraper:
           selector: //base/@href|//div[@id="download_form"]/following-sibling::script
           concat: "|"
           postProcess:
            - replace:
              - regex: '(.*)/vod/\|.*thumbnail:"(.*)",vtt_file:.*'
                with: $1$2
# Last Updated August 13, 2022
