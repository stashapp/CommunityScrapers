name: XConfessions
sceneByURL:
  - action: scrapeXPath
    url:
      - xconfessions.com
    scraper: sceneScraper
movieByURL:
  - action: scrapeXPath
    url:
      - xconfessions.com
    scraper: movieScraper
xPathScrapers:
  sceneScraper:
    common: &com
      $script: //script[contains(.,"window.__NUXT")]/text()
    scene:
      Title: &title //h1
      Date: &date
        selector: $script
        postProcess:
          - replace:
              - regex: .*release_date."([^\s]+).*
                with: $1
          - parseDate: 2006-01-02
      Details: &details
        selector: $script
        postProcess:
          - replace:
              - regex: .+synopsis_clean="(?P<full>[^"]+).+short_synopsis_clean="(?P<short>[^"]+).+
                with: |
                  $short

                  $full
      Performers:
        Name:
          selector: //p[span[contains(.,"Performers:")]]//a
          concat: " & "  # some performers are joined
          split: " & "  # with &
      Director: &director //p[span[contains(.,"Director:")]]//a
      Tags:
        Name: 
          selector: //div/a[contains(@href,'/categories/')] | //button/@data-test
          postProcess:
            - replace:
                - regex: 'profile-'
                  with: ''
      Image: &image
        selector: $script
        postProcess: 
          - replace:
              - regex: .+?cover_title_picture[=:]"([^"]+).+
                with: $1
              - regex: '\\u002F'
                with: '/'
      Studio: &studio
        Name:
          fixed: XConfessions
      Movies:
        Name: *title
        Director: *director
        Duration: &duration
          selector: $script
          postProcess:
            - replace:
                - regex: .+?.length="([^"]+).+
                  with: $1
        Date: *date
        Synopsis: *details
        Studio: *studio
        FrontImage: *image

  movieScraper:
    common: *com
    movie:
      Name: *title
      Director: *director 
      Duration: *duration
      Date: *date
      Synopsis: *details
      Studio: *studio
      FrontImage: *image
# Last Updated April 12, 2024
